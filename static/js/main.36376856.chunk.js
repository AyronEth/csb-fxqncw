(this["webpackJsonpeth-signer"]=this["webpackJsonpeth-signer"]||[]).push([[0],{88:function(e,t){},98:function(e,t,n){"use strict";n.r(t);var r=n(10),a=n(57),s=n.n(a),c=n(43),i=n(20),u=n(16),l=n(8),o=n(0),d=n.n(o),b=n(73),j=n(18);function f(e){var t=e.message;return t?Object(j.jsx)("div",{className:"alert alert-error",children:Object(j.jsxs)("div",{className:"flex-1",children:[Object(j.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-6 h-6 mx-2 stroke-current",children:Object(j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),Object(j.jsx)("label",{children:t})]})}):null}var p=n(58),h=n(26),x=Object(p.a)({apiKey:"AIzaSyDEE55Nf4CiqH0sAnozGEnIsWShSsmKaUg",authDomain:"discord-wallet-auth.firebaseapp.com",projectId:"discord-wallet-auth",storageBucket:"discord-wallet-auth.appspot.com",messagingSenderId:"21899065217",appId:"1:21899065217:web:108b941a3ff3001aed5a80",measurementId:"G-B1NXSG2T8R"}),O=Object(h.d)(x),m=Object(h.a)(O,"DiscordUser");function w(e,t){return g.apply(this,arguments)}function g(){return(g=Object(l.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:if(e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,Object(h.g)(Object(h.b)(Object(h.a)(O,"PendingEntry"),t),n);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return k.apply(this,arguments)}function k(){return(k=Object(l.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Object(h.c)(Object(h.b)(Object(h.a)(O,"PendingEntry"),t));case 4:return n=e.sent,e.abrupt("return",n.exists()?n.data():null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(l.a)(d.a.mark((function e(t,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Object(h.f)(m,Object(h.h)("discordId","==",t));case 4:r=e.sent,Object(h.e)(r,(function(e){e.docs.map((function(e){n(e.data().wallet)}))}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){var t=e.message;return t?Object(j.jsx)("div",{className:"alert alert-success",children:Object(j.jsx)("div",{className:"flex-1",children:Object(j.jsx)("label",{children:t})})}):null}var S=function(){var e=Object(l.a)(d.a.mark((function e(t,n,r,a){var s,c,i,u,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.log({message:a}),window.ethereum){e.next=4;break}throw new Error("No crypto wallet found. Please install it.");case 4:return e.next=6,window.ethereum.send("eth_requestAccounts");case 6:return s=new b.a.providers.Web3Provider(window.ethereum),c=s.getSigner(),e.next=10,c.getAddress();case 10:return i=e.sent,a+="\n Signing wallet:  ".concat(i),a+="\n Ticket:  ".concat(r),e.next=15,c.signMessage(a);case 15:return u=e.sent,l={message:a,signature:u,address:i},e.next=19,w(r,l);case 19:if(!e.sent){e.next=23;break}t("Wallet verified sucessfully."),e.next=24;break;case 23:n("Ticket has already been used. Please generate another link.");case 24:return e.abrupt("return",l);case 27:e.prev=27,e.t0=e.catch(0),n(e.t0.message);case 30:case"end":return e.stop()}}),e,null,[[0,27]])})));return function(t,n,r,a){return e.apply(this,arguments)}}();function I(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(),o=Object(u.a)(s,2),b=o[0],p=o[1],h=Object(r.useState)(),x=Object(u.a)(h,2),O=x[0],m=x[1],w=Object(r.useState)("None"),g=Object(u.a)(w,2),k=g[0],I=g[1],A=Object(r.useState)(""),E=Object(u.a)(A,2),P=E[0],D=E[1],T=Object(r.useState)(),W=Object(u.a)(T,2),B=W[0],q=W[1],G=Object(c.b)(),L=Object(u.a)(G,1)[0],M=function(){var e=Object(l.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),p(),e.next=4,S(m,p,P,"\nClick to sign in and verify your wallet with the 888 inner circle discord. \n\nThis request will not trigger a blockchain transaction or cost any gas fees.\n");case 4:(r=e.sent)&&a([].concat(Object(i.a)(n),[r]));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){if(D(L.get("uuid")),console.log(P),null!=P){var e=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,v(P);case 4:(t=e.sent)?q(t.discordId):p("Ticket not found. Please generate another link.");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),function(e,t){y.apply(this,arguments)}(B,(function(e){I(e)}))}else p("Invalid Url. Please generate another link.")}),[P,L,B]),Object(j.jsxs)("form",{className:"m-4",onSubmit:M,children:[Object(j.jsxs)("div",{className:"credit-card w-full shadow-lg mx-auto rounded-xl bg-white",children:[Object(j.jsxs)("main",{className:"mt-4 p-4",children:[Object(j.jsxs)("h1",{className:"text-xl font-semibold text-gray-700",children:["Discord Id: ",B]}),Object(j.jsxs)("h1",{className:"text-xl font-semibold text-gray-700",children:["Associated wallet: ",k]})]}),Object(j.jsx)("footer",{className:"p-4",children:Object(j.jsx)("button",{disabled:!B,type:"submit",className:"btn btn-primary submit-button focus:ring focus:outline-none w-full",children:"Associate Wallet"})})]}),Object(j.jsx)(f,{message:b}),Object(j.jsx)(N,{message:O})]})}function A(){return Object(j.jsx)("div",{className:"flex h-screen justify-center items-center",children:Object(j.jsx)("div",{className:"w-full lg:w-1/2",children:Object(j.jsx)(I,{})})})}var E=document.getElementById("root");s.a.render(Object(j.jsx)(r.StrictMode,{children:Object(j.jsx)(c.a,{children:Object(j.jsx)(A,{})})}),E)}},[[98,1,2]]]);
//# sourceMappingURL=main.36376856.chunk.js.map