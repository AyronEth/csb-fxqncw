(this["webpackJsonpeth-signer"]=this["webpackJsonpeth-signer"]||[]).push([[0],{68:function(e,t){},79:function(e,t,n){"use strict";n.r(t);var r=n(9),a=n(51),s=n.n(a),c=n(39),i=n(5),u=n(15),l=n(0),o=n.n(l),b=n(57),d=n(13);function p(e){var t=e.message;return t?Object(d.jsx)("div",{className:"alert alert-error",children:Object(d.jsxs)("div",{className:"flex-1",children:[Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"w-6 h-6 mx-2 stroke-current",children:Object(d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})}),Object(d.jsx)("label",{children:t})]})}):null}var f=n(52),j=n(20),x=Object(f.a)({apiKey:"AIzaSyDEE55Nf4CiqH0sAnozGEnIsWShSsmKaUg",authDomain:"discord-wallet-auth.firebaseapp.com",projectId:"discord-wallet-auth",storageBucket:"discord-wallet-auth.appspot.com",messagingSenderId:"21899065217",appId:"1:21899065217:web:108b941a3ff3001aed5a80",measurementId:"G-B1NXSG2T8R"}),h=Object(j.e)(x),w=Object(j.a)(h,"DiscordUser");function O(e,t,n){return g.apply(this,arguments)}function g(){return(g=Object(i.a)(o.a.mark((function e(t,n,r){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:if(e.sent){e.next=4;break}return e.abrupt("return",!1);case 4:if(n&&r){e.next=6;break}return e.abrupt("return",!1);case 6:return a={signed_message:n,updated_doc:r},e.next=9,Object(j.h)(Object(j.c)(Object(j.a)(h,"PendingEntry"),t),a);case 9:return e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Object(j.d)(Object(j.c)(Object(j.a)(h,"PendingEntry"),t));case 4:return n=e.sent,e.abrupt("return",n.exists()?n.data():null);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Object(j.b)(Object(j.c)(Object(j.a)(h,"PendingEntry"),t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Object(j.g)(w,Object(j.i)("discordId","==",t));case 4:r=e.sent,Object(j.f)(r,(function(e){e.docs.map((function(e){n(e.data())}))}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){var t=e.message;return t?Object(d.jsx)("div",{className:"alert alert-success",children:Object(d.jsx)("div",{className:"flex-1",children:Object(d.jsx)("label",{children:t})})}):null}function S(){var e=Object(r.useState)(),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(),l=Object(u.a)(s,2),f=l[0],j=(l[1],Object(r.useState)()),x=Object(u.a)(j,2),h=x[0],w=x[1],g=Object(r.useState)(),v=Object(u.a)(g,2),S=v[0],I=v[1],E=Object(r.useState)(""),D=Object(u.a)(E,2),M=D[0],P=D[1],W=Object(r.useState)(),A=Object(u.a)(W,2),B=A[0],C=A[1],L=Object(c.b)(),F=Object(u.a)(L,1)[0],q=new b.a.providers.Web3Provider(window.ethereum),G=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="\n  Click to sign in and verify your wallet with the 888 inner circle discord. \n\n  This request will not trigger a blockchain transaction or cost any gas fees.\n  ",console.log({message:n}),window.ethereum){e.next=4;break}throw new Error("No crypto wallet found. Please install it.");case 4:return e.prev=4,e.next=7,window.ethereum.send("eth_requestAccounts");case 7:return r=q.getSigner(),e.next=10,r.getAddress();case 10:return s=e.sent,n+="\n Signing wallet:  ".concat(s),n+="\n Nonce:  ".concat(t),e.next=15,r.signMessage(n);case 15:return c=e.sent,e.abrupt("return",{message:n,signature:c,wallet:s});case 19:return e.prev=19,e.t0=e.catch(4),a("Failed to sign message. "+e.t0.message),e.abrupt("return",null);case 23:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a(),e.next=4,G(M);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return");case 7:return r={wallet:n.wallet},e.next=10,O(M,n,r);case 10:if(e.sent){e.next=12;break}a("Failed to update ticket.");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a(),e.next=4,G(M);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return");case 7:return r={wallet:null},e.next=10,O(M,n,r);case 10:if(e.sent){e.next=12;break}a("Failed to update ticket.");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a(),e.next=4,G(M);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return");case 7:return r={mintWallet:n.wallet},e.next=10,O(M,n,r);case 10:if(e.sent){e.next=12;break}a("Failed to update ticket.");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a(),e.next=4,G(M);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return");case 7:return r={mintWallet:null},e.next=10,O(M,n,r);case 10:if(e.sent){e.next=12;break}a("Failed to update ticket.");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){if(P(F.get("uuid")),console.log(M),null!=M){var e=function(){var e=Object(i.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,m(M);case 4:(t=e.sent)?C(t.discordId):a("Ticket not found. Please generate another link.");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),function(e,t){y.apply(this,arguments)}(B,(function(e){e&&(w(e.wallet),I(e.mintWallet))})),window.addEventListener("beforeunload",(function(e){!function(e){k.apply(this,arguments)}(M)}))}else a("Invalid Url. Please generate another link.")}),[M,F,B]),Object(d.jsx)("form",{className:"m-4",children:Object(d.jsxs)("div",{className:"credit-card w-full shadow-lg mx-auto rounded-xl bg-white",children:[Object(d.jsxs)("main",{className:"mt-4 p-4 space-y-4",children:[Object(d.jsx)("h1",{className:"text-xl font-semibold text-gray-700",children:"Discord Id:"}),B?Object(d.jsx)("span",{class:"badge badge-lg",children:B}):Object(d.jsx)(p,{message:"Discord id not found"}),Object(d.jsx)("h1",{className:"text-xl font-semibold text-gray-700",children:"Main (raffling) wallet:"}),h?Object(d.jsx)("button",{onClick:U,children:Object(d.jsxs)("div",{class:"badge badge-lg badge-success gap-2",children:[h,Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"inline-block w-4 h-4 stroke-current",children:Object(d.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})})]})}):Object(d.jsx)("button",{disabled:!B,type:"submit",onClick:T,className:"btn btn-primary submit-button focus:ring focus:outline-none w-full",children:"Sign and Verify wallet"}),Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{className:"text-xl font-semibold text-gray-700",children:"Mint Wallet:"}),S?Object(d.jsx)("button",{onClick:z,children:Object(d.jsxs)("div",{class:"badge badge-lg badge-success gap-2",children:[S,Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"inline-block w-4 h-4 stroke-current",children:Object(d.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})})]})}):Object(d.jsx)("button",{disabled:!B,type:"submit",onClick:_,className:"btn btn-primary submit-button focus:ring focus:outline-none w-full",children:"Sign and Verify wallet"})]})]}),Object(d.jsxs)("footer",{className:"p-4 space-y-4",children:[Object(d.jsx)(p,{message:n}),Object(d.jsx)(N,{message:f})]})]})})}function I(){return Object(d.jsx)("div",{className:"flex h-screen justify-center items-center  bg-opacity-10 bg-black",children:Object(d.jsx)("div",{className:"w-full lg:w-1/2",children:Object(d.jsx)(S,{})})})}var E=document.getElementById("root");s.a.render(Object(d.jsx)(r.StrictMode,{children:Object(d.jsx)(c.a,{children:Object(d.jsx)(I,{})})}),E)}},[[79,1,2]]]);
//# sourceMappingURL=main.8b933ab8.chunk.js.map